import{P as p,t as _,m as H,c as V,R as U,u as C,f as W,e as Z,r as f,j as e,C as $,B as z,Q as F,h as T}from"./index-29ebecb4.js";import{u as J,C as h}from"./index.esm-28c77aa9.js";import{F as Y}from"./Form-feffa48a.js";import{F as c,L as m}from"./Label-25c4d9a0.js";import{I as d}from"./Input-092d3532.js";import{A as G}from"./Alert-53afee14.js";import{u as L}from"./useMutation-742de80f.js";import{D as g}from"./DisplayFormError-41029f3c.js";import{T as Q}from"./TermsAndConditions-827d029e.js";import{i as x}from"./isNullOrWhiteSpace-3eb5922e.js";import{H as K}from"./Helmet-3f1c463b.js";import{S as X}from"./SocialLogins-e9a4aab6.js";import{C as ee}from"./CheckFromEmailSpamJunkWarning-4d01aed3.js";import"./react-markdown-9948af6f.js";import"./useSocialAuthLogin-942c6414.js";import"./types-9dadba29.js";import"./ErrorDisplay-926af4d8.js";var se=["className","cssModule","inline","color","tag"];function w(){return w=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},w.apply(this,arguments)}function re(r,i){if(r==null)return{};var n=ae(r,i),t,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(a=0;a<l.length;a++)t=l[a],!(i.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ae(r,i){if(r==null)return{};var n={},t=Object.keys(r),a,l;for(l=0;l<t.length;l++)a=t[l],!(i.indexOf(a)>=0)&&(n[a]=r[a]);return n}var te={children:p.node,inline:p.bool,tag:_,color:p.string,className:p.string,cssModule:p.object};function j(r){var i=r.className,n=r.cssModule,t=r.inline,a=r.color,l=a===void 0?"muted":a,o=r.tag,y=o===void 0?"small":o,N=re(r,se),u=H(V(i,t?!1:"form-text",l?"text-".concat(l):!1),n);return U.createElement(y,w({},N,{className:u}))}j.propTypes=te;const ie=()=>C("/api/register",{errorMessage:"Failed to register user"}),ne=()=>C("/api/user-registration",{errorMessage:"Failed to register user"}),ke=()=>{const{auth:r}=W(),i=Z(),n=r.microsoft.enabled||r.facebook.enabled||r.google.enabled,t="Join the VintageAndPreOwned.com family today! Register to unlock personalized shopping experiences, exclusive deals, and seamless selling on platforms like eBay and Etsy. Be part of our sustainable fashion community, where every vintage find is a treasure. Sign up now and revolutionize your vintage fashion journey!",{control:a,handleSubmit:l,formState:{errors:o},clearErrors:y,watch:N}=J({defaultValues:{handle:"@",firstName:"",lastName:"",email:"",password:""},mode:"onChange"}),[u,R]=f.useState(!1),[k,v]=f.useState(null),O=N(),[P,A]=f.useState(!1);f.useEffect(()=>{const{handle:s,firstName:b,lastName:D,email:B}=O;A(!x(s)&&!x(b)&&!x(D)&&!x(B))},[O]);const q=ie(),I=ne(),S=L(q,{onSuccess:()=>{F.success("Registration successful! Please check your email for further instructions."),i("/login")},onError:s=>{v(T(s))}}),E=L(I,{onSuccess:()=>{F.success("Registration successful! Please check your email and follow the instructions to verify your account."),i("/login")},onError:s=>{v(T(s))}}),M=s=>{if(v(null),y(),s.password){const b={handle:s.handle,firstName:s.firstName,lastName:s.lastName,email:s.email,password:s.password};E.mutate(b)}else S.mutate(s)};return e.jsxs(e.Fragment,{children:[e.jsxs(K,{children:[e.jsx("title",{children:"Vintage and Pre-Owned - Register"}),e.jsx("meta",{property:"og:title",content:"Vintage and Pre-Owned"}),e.jsx("meta",{property:"og:description",content:t}),e.jsx("meta",{property:"og:url",content:window.location.href}),e.jsx("meta",{property:"og:type",content:"website"})]}),e.jsxs($,{className:"mt-5",children:[e.jsx("h1",{className:"text-center",children:"Become a Seller and Shopper at VintageAndPreOwned.com"}),e.jsx("p",{className:"lead",children:"Unlock the full potential of VintageAndPreOwned.com by registering today! Join as a seller to showcase and sell your exquisite vintage collections to a passionate audience. Or dive into our diverse marketplace as a buyer, discovering unique treasures and timeless fashion. Embrace the opportunity to contribute to sustainable style while enjoying the thrill of vintage shopping and selling."}),n&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-center small",children:"Register using a social login …"}),e.jsx("div",{className:"my-3",children:e.jsx(X,{registration:!0})}),e.jsx("p",{className:"text-center small",children:"… or create an account with email …"})]}),e.jsxs(Y,{onSubmit:l(M),children:[e.jsxs(c,{children:[e.jsx(m,{for:"handle",children:"Handle"}),e.jsx(h,{name:"handle",control:a,rules:{required:"Handle is required",pattern:{value:/^@[A-Za-z0-9_]{1,15}$/,message:"Invalid handle"}},render:({field:s})=>e.jsx(d,{...s,type:"text",id:"handle",maxLength:16,invalid:!!o.handle})}),e.jsx(j,{className:"text-muted small",children:'Your handle should start with "@" followed by 1-15 alphanumeric characters.'}),e.jsx(g,{error:o.handle,fieldDisplayName:"Handle"})]}),e.jsxs(c,{children:[e.jsx(m,{for:"firstName",children:"First Name"}),e.jsx(h,{name:"firstName",control:a,rules:{required:"First Name is required"},render:({field:s})=>e.jsx(d,{...s,type:"text",id:"firstName",maxLength:512,invalid:!!o.firstName})}),e.jsx(g,{error:o.firstName,fieldDisplayName:"First Name"})]}),e.jsxs(c,{children:[e.jsx(m,{for:"lastName",children:"Last Name"}),e.jsx(h,{name:"lastName",control:a,rules:{required:"Last Name is required"},render:({field:s})=>e.jsx(d,{...s,type:"text",id:"lastName",maxLength:512,invalid:!!o.lastName})}),e.jsx(g,{error:o.lastName,fieldDisplayName:"Last Name"})]}),e.jsxs(c,{children:[e.jsx(m,{for:"email",children:"Email"}),e.jsx(h,{name:"email",control:a,rules:{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}},render:({field:s})=>e.jsx(d,{...s,type:"email",id:"email",maxLength:2048,invalid:!!o.email})}),e.jsx(g,{error:o.email,fieldDisplayName:"Email"})]}),e.jsx(ee,{text:"Please check your email and follow the instructions to verify your account."}),e.jsxs(c,{children:[e.jsx(m,{for:"password",children:"Password (Optional)"}),e.jsx(h,{name:"password",control:a,render:({field:s})=>e.jsx(d,{...s,type:"password",id:"password",invalid:!!o.password})}),e.jsx(j,{className:"text-muted small",children:"Leave blank to register with email only. You'll receive a login link via email."}),e.jsx(g,{error:o.password,fieldDisplayName:"Password"})]}),e.jsx("div",{style:{maxHeight:"200px",overflow:"auto",border:"1px solid #ced4da",borderRadius:".25rem",padding:"10px"},children:e.jsx(Q,{})}),e.jsxs(c,{check:!0,className:"my-3",children:[e.jsx(d,{type:"checkbox",required:!0,id:"acceptTerms",checked:u,onChange:s=>R(s.target.checked)}),e.jsx(m,{for:"acceptTerms",check:!0,children:"I have read and accept the Terms and Conditions"})]}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx(z,{type:"submit",color:"primary",disabled:!u||!P||S.isLoading||E.isLoading,children:"Submit"})}),P&&!u&&e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx(j,{color:"danger",className:"small",children:"Please read and accept the Terms and Conditions"})}),k&&e.jsx(G,{color:"danger",className:"mt-3",children:k})]})]})]})};export{ke as default};
