import{w as j,r as i,p as P,j as e,S as f,L as b}from"./index-29ebecb4.js";import{T as v}from"./Table-2fae8ad2.js";import{A as w}from"./Alert-53afee14.js";import{S as A}from"./Search-9d8b76b4.js";import{S as L}from"./StatusButtons-c1352ffa.js";import{g as R,P as k}from"./Pagination-f8b1ecd4.js";import{S as p}from"./types-9dadba29.js";import"./Label-25c4d9a0.js";import"./Input-092d3532.js";import"./x-d20e24f6.js";import"./ButtonGroup-cb6cbaf6.js";import"./CardBody-f79b7743.js";const y=(a,o,r,n)=>{const s=new URLSearchParams;return s.append("page",String(a)),s.append("perPage",String(o)),r&&s.append("search",r),n&&s.append("status",n),j(`/api/paged-stores?${s.toString()}`,{errorMessage:"Failed to get paged stores"})},M=()=>{const[a,o]=i.useState(1),[r,n]=i.useState(R()),[s,h]=i.useState(p.Active),[d,l]=i.useState(""),g=y(a,r,d,s?p[s]:void 0),{data:c,error:m,isLoading:u,refetch:x}=P(["stores",a,r,s,d],g,{keepPreviousData:!0}),S=t=>{o(1),n(t)};return u?e.jsx(f,{className:"d-block mx-auto"}):m?e.jsx(w,{color:"danger",toggle:()=>x(),children:"Unable to fetch stores"}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mb-4",children:"Stores"}),c&&e.jsxs(e.Fragment,{children:[e.jsx(A,{searchText:d,onSearch:l,children:e.jsx(L,{status:s,setStatus:h})}),e.jsxs(v,{responsive:!0,striped:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Handle"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"# Admins"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:c.items.map(t=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx(b,{to:`/store-admin/${t.handle}`,children:t.handle})}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.adminsCount}),e.jsx("td",{children:p[t.status]})]},t.id))})]}),e.jsx(k,{pagedResult:c,onPageSelected:o,perPage:r,onPerPageSelected:S})]})]})};export{M as default};
