import{u,e as h,r,z as p,Q as E,j as e}from"./index-29ebecb4.js";import{E as d}from"./ErrorDisplay-926af4d8.js";import{S as g}from"./Spinner-99079439.js";import"./Alert-53afee14.js";const x=()=>u("/api/email-confirmation",{errorMessage:"Failed to confirm email"}),y=()=>{const s=h(),[t,c]=r.useState(null),[l,n]=r.useState(!1),[o]=p(),a=o.get("user_id"),i=o.get("token"),m=x();return r.useEffect(()=>{a&&i?(n(!0),m({userId:a,token:i}).then(()=>{E.success("Email verified."),s("/login")}).catch(f=>{c(f)}).finally(()=>{n(!1)})):s("/login")},[a,i,s,m]),l?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h1",children:"Email confirmation"}),e.jsx(g,{})]}):t?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h1",children:"Email confirmation"}),e.jsx(d,{error:t,title:"Unable to verify email",onDismiss:()=>s("/")})]}):e.jsx("h1",{className:"h1",children:"Email confirmation"})};export{y as default};
