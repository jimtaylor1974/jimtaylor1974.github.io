import{w as C,b as L,p as R,j as e,B as a,L as h}from"./index-29ebecb4.js";import{E as k}from"./ErrorDisplay-926af4d8.js";import{t as w}from"./toQuery-95abe6fa.js";import{g as O}from"./getTimezoneOffset-4655d392.js";import{R as E,C as i}from"./Col-7106f25e.js";import{T as b}from"./Table-2fae8ad2.js";import{F as _}from"./Form-feffa48a.js";import{F as m,L as x}from"./Label-25c4d9a0.js";import{I as u}from"./Input-092d3532.js";import{u as j}from"./useLocalStorage-c1e4b9b7.js";import"./Alert-53afee14.js";const $=o=>{const n=w({...o,timezoneOffset:O()});return C(`/api/dashboard?${n}`,{errorMessage:"Failed to get dashboard report"})},Y=({storeInfo:o})=>{const{isAuthenticated:n}=L(),[s,f]=j("Dashboard_timePeriod","thisweek"),[d,y]=j("Dashboard_fromDate",""),[l,g]=j("Dashboard_toDate",""),D={storeId:o.id,timePeriod:s,fromDate:s==="custom"?d:void 0,toDate:s==="custom"?l:void 0},v=$({storeId:o.id,timePeriod:s,fromDate:s==="custom"?d:void 0,toDate:s==="custom"?l:void 0}),{data:r,error:p,isLoading:S,refetch:P}=R(["dashboard-report",D.storeId],()=>v(),{enabled:n}),N=t=>{t.preventDefault(),P()},T=()=>e.jsxs(b,{bordered:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Publish Status"}),e.jsx("th",{children:"Count"}),e.jsx("th",{children:"Total Price"}),e.jsx("th",{children:"Total Cost"})]})}),e.jsxs("tbody",{children:[r==null?void 0:r.inventoryStatus.map((t,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.publishStatus}),e.jsx("td",{children:t.count}),e.jsxs("td",{children:[r.currencySymbol," ",t.totalPrice.toFixed(2)]}),e.jsxs("td",{children:[r.currencySymbol," ",t.totalCost.toFixed(2)]})]},c)),(r==null?void 0:r.inventoryStatus.length)===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:"No inventory items found"})})]})]}),F=()=>e.jsxs(b,{bordered:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order Status"}),e.jsx("th",{children:"Total"})]})}),e.jsxs("tbody",{children:[r==null?void 0:r.orderPerformance.map((t,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.label}),e.jsxs("td",{children:[r.currencySymbol," ",t.totalValue.toFixed(2)]})]},c)),(r==null?void 0:r.orderPerformance.length)===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:"No orders found"})})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(_,{onSubmit:N,children:e.jsxs(E,{form:!0,className:"align-items-end",children:[e.jsx(i,{md:"3",children:e.jsxs(m,{className:"mb-0",children:[e.jsx(x,{for:"timePeriod",className:"mb-0",children:"Time Period"}),e.jsxs(u,{type:"select",name:"timePeriod",id:"timePeriod",value:s,onChange:t=>f(t.target.value),children:[e.jsx("option",{value:"thisweek",children:"This Week"}),e.jsx("option",{value:"thismonth",children:"This Month"}),e.jsx("option",{value:"thisyear",children:"This Year"}),e.jsx("option",{value:"sincestart",children:"Since Start"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]})}),s==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{md:"3",children:e.jsxs(m,{className:"mb-0",children:[e.jsx(x,{for:"fromDate",className:"mb-0",children:"From Date"}),e.jsx(u,{type:"date",name:"fromDate",id:"fromDate",value:d,onChange:t=>y(t.target.value)})]})}),e.jsx(i,{md:"3",children:e.jsxs(m,{className:"mb-0",children:[e.jsx(x,{for:"toDate",className:"mb-0",children:"To Date"}),e.jsx(u,{type:"date",name:"toDate",id:"toDate",value:l,onChange:t=>g(t.target.value)})]})})]}),e.jsx(i,{md:"auto",className:"text-right mb-3",children:e.jsx(a,{color:"primary",type:"submit",children:"Refresh"})})]})}),e.jsx("hr",{}),S&&e.jsx("div",{children:"Loading..."}),p&&e.jsx(k,{error:p}),r&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Inventory Status"}),T(),e.jsx("h2",{children:"Order Performance"}),F()]}),e.jsxs("div",{className:"d-flex justify-content-end",children:[e.jsx(a,{tag:h,to:`/store-admin/${o.handle}/edit-listing/_`,color:"primary",type:"button",className:"me-2",children:"Create New Listing"}),e.jsx(a,{tag:h,to:`/store-admin/${o.handle}/photos`,color:"primary",type:"button",className:"me-2",children:"Upload Photo"}),e.jsx(a,{tag:h,to:`/store-admin/${o.handle}/orders`,color:"primary",type:"button",className:"me-2",children:"Check Orders"})]})]})};export{Y as default};
