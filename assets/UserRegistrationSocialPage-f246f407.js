import{u as F,b as C,e as k,d as L,r as R,j as e,B as M,Q as d}from"./index-660d126b.js";import{u as q}from"./useMutation-e7c8b84b.js";import{F as E}from"./Form-d6175283.js";import{F as r,L as i}from"./Label-4c846b7c.js";import{I as n}from"./Input-fbe04029.js";import{F as P}from"./FormContainer-88a2ce37.js";import{C as w}from"./CheckFromEmailSpamJunkWarning-fd9d28f2.js";const A=()=>F("/api/user-registration-social",{errorMessage:"Failed to register user with social account"}),O=()=>{const h=C(),o=k(),{state:f}=L(),{provider:l,token:m,firstName:g,lastName:x,email:c}=f,[a,p]=R.useState({handle:"",firstName:g||"",lastName:x||"",email:c||"",provider:l,token:m}),j=A(),u=q(j);if(!l||!m)return o("/"),null;const N=t=>{if(t.accessToken&&t.refreshToken){h.onAuthenticated(t),d.success("Account created."),o("/");return}d.success("Please check your email and follow the instructions to verify your account."),o("/login")},S=t=>{t.preventDefault(),u.mutate(a,{onSuccess:N})},s=t=>{const{name:y,value:v}=t.target;p(b=>({...b,[y]:v}))};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mb-4",children:"Complete user registration"}),e.jsxs(P,{children:[e.jsxs(E,{onSubmit:S,children:[e.jsxs(r,{children:[e.jsx(i,{for:"handle",children:"Handle"}),e.jsx(n,{type:"text",name:"handle",id:"handle",value:a.handle,onChange:s,required:!0})]}),e.jsxs(r,{children:[e.jsx(i,{for:"firstName",children:"First Name"}),e.jsx(n,{type:"text",name:"firstName",id:"firstName",value:a.firstName,onChange:s,required:!0})]}),e.jsxs(r,{children:[e.jsx(i,{for:"lastName",children:"Last Name"}),e.jsx(n,{type:"text",name:"lastName",id:"lastName",value:a.lastName,onChange:s,required:!0})]}),e.jsxs(r,{children:[e.jsx(i,{for:"email",children:"Email"}),e.jsx(n,{type:"email",name:"email",id:"email",value:a.email,onChange:s,required:!0,readOnly:!!c})]}),e.jsx(M,{type:"submit",color:"primary",disabled:u.isLoading,children:u.isLoading?"Submitting...":"Submit"})]}),e.jsx(w,{text:"Please check your email and follow the instructions to verify your account."})]})]})};export{O as default};
