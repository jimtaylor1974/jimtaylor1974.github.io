import{j as e,b as y,r as d,p as b,L as O}from"./index-29ebecb4.js";import{S as N}from"./Spinner-99079439.js";import{E as k}from"./ErrorDisplay-926af4d8.js";import{g as I,P as w}from"./Pagination-f8b1ecd4.js";import{T as D}from"./Table-2fae8ad2.js";import{S as R}from"./Search-9d8b76b4.js";import{F as T,L as E}from"./Label-25c4d9a0.js";import{I as L}from"./Input-092d3532.js";import{O as r}from"./types-9dadba29.js";import{C as l}from"./Currency-9311fda6.js";import{D as j}from"./DateTime-ba55e20f.js";import{u as M}from"./useGetOrders-cb4ce7d0.js";import{b as C}from"./strings-0c217f2f.js";import"./Alert-53afee14.js";import"./ButtonGroup-cb6cbaf6.js";import"./CardBody-f79b7743.js";import"./x-d20e24f6.js";import"./currency-symbol-map-2c95d993.js";import"./toQuery-95abe6fa.js";const F=({statuses:c,setStatuses:h})=>{const i=[{text:"New",status:r.New},{text:"Invoiced",status:r.Invoiced},{text:"Paid",status:r.Paid},{text:"Shipped",status:r.Shipped}],o=s=>{const a=n(s)?c.filter(x=>x!==s):[...c,s];h(a)},n=s=>c.includes(s);return e.jsx("div",{className:"d-flex flex-wrap gap-2",children:i.map(s=>{const a=n(s.status);return e.jsxs(T,{check:!0,inline:!0,children:[e.jsx(L,{type:"checkbox",onChange:()=>o(s.status),checked:a,id:`checkbox-${s.status}`}),e.jsx(E,{check:!0,for:`checkbox-${s.status}`,children:s.text})]},s.status)})})},U=({handle:c=""})=>{const h=y(),[i,o]=d.useState(1),[n,s]=d.useState(I()),[a,x]=d.useState(""),[u,S]=d.useState([r.New,r.Invoiced,r.Paid,r.Shipped]),f=t=>{o(1),s(t)},g=M({page:i,perPage:n,search:a,status:u.map(t=>String(Number(t))).join(","),handle:c}),{data:m,error:p,isLoading:v,refetch:P}=b(["orders",i,n,a,u,c],g,{enabled:h.isAuthenticated});return v?e.jsx(N,{}):p?e.jsx(k,{error:p,title:"Unable to fetch orders",onDismiss:()=>P()}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h1",children:"Orders"}),e.jsx(R,{searchText:a,onSearch:x,children:e.jsx(F,{statuses:u,setStatuses:S})}),m&&e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order placed"}),e.jsx("th",{children:"by"}),e.jsx("th",{children:"Reserved until"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Invoice ref"}),e.jsx("th",{children:"Item count"}),e.jsx("th",{children:"Items total"}),e.jsx("th",{children:"Discount"}),e.jsx("th",{children:"Shipping"}),e.jsx("th",{children:"Order total"}),e.jsx("th",{className:"col-50",children:"Â "})]})}),e.jsx("tbody",{children:m.items.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(j,{val:t.createdOnUtc,utc:!0})}),e.jsxs("td",{children:[t.firstName," ",t.lastName]}),e.jsx("td",{children:e.jsx(j,{val:t.reservedUntilUtc,utc:!0,format:"D MMM YYYY"})}),e.jsx("td",{children:C(r[t.orderStatus])}),e.jsx("td",{children:t.invoiceRef}),e.jsx("td",{children:t.itemCount}),e.jsx("td",{children:e.jsx(l,{val:t.itemsTotal,currency:t.currency})}),e.jsx("td",{children:e.jsx(l,{val:t.discount,currency:t.currency})}),e.jsx("td",{children:e.jsx(l,{val:t.shipping,currency:t.currency})}),e.jsx("td",{children:e.jsx(l,{val:t.total,currency:t.currency})}),e.jsx("td",{className:"col-50",children:e.jsx(O,{to:`/stores/${t.store.handle}/order/${t.id}`,className:"text-decoration-none",children:"View"})})]},t.id))})]}),e.jsx(w,{pagedResult:m,onPageSelected:o,perPage:n,onPerPageSelected:f})]})]})},re=()=>e.jsx(U,{});export{re as default};
