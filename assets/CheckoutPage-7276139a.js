import{u as m,b as f,v as p,r as n,j as e,S as d,B as k,L as x,Q as g,h as E}from"./index-29ebecb4.js";import{E as j}from"./ErrorDisplay-926af4d8.js";import{u as y}from"./useMutation-742de80f.js";import"./Alert-53afee14.js";function C(s){return s!==1&&"s"}const S=()=>m("/api/checkout-info",{errorMessage:"Failed to get checkout info"}),L=()=>{const{isAuthenticated:s}=f(),{orderItems:c}=p(),a=c().map(t=>({id:t.id,purchaseQuantity:t.purchaseQuantity,purchasePrice:t.purchasePrice})),[r,i]=n.useState(null),[u,h]=n.useState(null),l=S(),o=y(l,{onSuccess:t=>{i(t)},onError:t=>{console.error("Error:",t),g.error(E(t)),h(t)}});return n.useEffect(()=>{s&&(async()=>await o.mutateAsync({items:a}))()},[s]),o.isLoading?e.jsx(d,{className:"d-flex justify-content-center"}):u?e.jsx(j,{error:u,onDismiss:()=>o.mutate({items:a})}):r?e.jsxs(e.Fragment,{children:[r.stores.length===0&&e.jsx("p",{className:"text-body",children:"There are no items to checkout."}),r.stores.map(t=>e.jsx("div",{children:e.jsxs(k,{tag:x,to:`/stores/${t.handle}/checkout`,size:"lg",block:!0,color:"success",children:["Checkout ",t.itemCount," item",C(t.itemCount)," ","from ",t.name," ",t.handle]})},t.handle))]}):null};export{L as default};
