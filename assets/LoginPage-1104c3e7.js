import{P as c,t as F,R as u,m as A,c as v,o as pe,r as b,_ as de,a as he,u as D,b as ye,d as be,e as ve,j as o,C as ge,N as je,f as z,B as _,L as V,Q as H,g as J}from"./index-660d126b.js";import{H as xe}from"./Helmet-6a411193.js";import{u as we,C as Oe}from"./index.esm-12fca3ed.js";import{u as P}from"./useMutation-e7c8b84b.js";import{R as U,C as x}from"./Col-95c4f5db.js";import{C as _e}from"./Card-0007d0c0.js";import{C as Pe}from"./CardBody-ff2bad32.js";import{F as G}from"./Form-d6175283.js";import{F as E,L as N}from"./Label-4c846b7c.js";import{I as k}from"./Input-fbe04029.js";import{A as Ee}from"./Alert-e5aa8ee6.js";import{S as Ne}from"./SocialLogins-94edbaa0.js";import{D as ke}from"./DisplayFormError-c2d4e36b.js";import{E as Q}from"./ErrorDisplay-52780e50.js";import"./useSocialAuthLogin-c406f09d.js";import"./types-9dadba29.js";function T(e){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(e)}var Te=["className","cssModule","active","tag","innerRef"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},S.apply(this,arguments)}function Se(e,t){if(e==null)return{};var a=Re(e,t),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Re(e,t){if(e==null)return{};var a={},r=Object.keys(e),n,i;for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t,a){return t&&Y(e.prototype,t),a&&Y(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Le(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},R(e,t)}function Me(e){var t=Fe();return function(){var r=w(e),n;if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){if(t&&(T(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}function Z(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},w(e)}var Ae={active:c.bool,className:c.string,cssModule:c.object,disabled:c.bool,href:c.any,innerRef:c.oneOfType([c.object,c.func,c.string]),onClick:c.func,tag:F},ee=function(e){Le(a,e);var t=Me(a);function a(r){var n;return Ce(this,a),n=t.call(this,r),n.onClick=n.onClick.bind(Z(n)),n}return $e(a,[{key:"onClick",value:function(n){if(this.props.disabled){n.preventDefault();return}this.props.href==="#"&&n.preventDefault(),this.props.onClick&&this.props.onClick(n)}},{key:"render",value:function(){var n=this.props,i=n.className,f=n.cssModule,l=n.active,m=n.tag,p=m===void 0?"a":m,h=n.innerRef,g=Se(n,Te),j=A(v(i,"nav-link",{disabled:g.disabled,active:l}),f);return u.createElement(p,S({},g,{ref:h,onClick:this.onClick,className:j}))}}]),a}(u.Component);ee.propTypes=Ae;const K=ee;var te=u.createContext({});function C(e){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(e)}function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},$.apply(this,arguments)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t,a){return t&&X(e.prototype,t),a&&X(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function qe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},L(e,t)}function We(e){var t=He();return function(){var r=O(e),n;if(t){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ze(this,n)}}function ze(e,t){if(t&&(C(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ve(e)}function Ve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},O(e)}var re={tag:F,activeTab:c.any,className:c.string,cssModule:c.object},ne=function(e){qe(a,e);var t=We(a);function a(r){var n;return De(this,a),n=t.call(this,r),n.state={activeTab:n.props.activeTab},n}return Be(a,[{key:"render",value:function(){var n=this.props,i=n.className,f=n.cssModule,l=n.tag,m=l===void 0?"div":l,p=pe(this.props,Object.keys(re)),h=A(v("tab-content",i),f);return u.createElement(te.Provider,{value:{activeTabId:this.state.activeTab}},u.createElement(m,$({},p,{className:h})))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.activeTab!==n.activeTab?{activeTab:n.activeTab}:null}}]),a}(b.Component);const Je=ne;ne.propTypes=re;var Ue=["className","cssModule","tabId","tag"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},M.apply(this,arguments)}function Ge(e,t){if(e==null)return{};var a=Qe(e,t),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qe(e,t){if(e==null)return{};var a={},r=Object.keys(e),n,i;for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}var Ye={tag:F,className:c.string,cssModule:c.object,tabId:c.any};function I(e){var t=e.className,a=e.cssModule,r=e.tabId,n=e.tag,i=n===void 0?"div":n,f=Ge(e,Ue),l=function(p){return A(v("tab-pane",t,{active:r===p}),a)};return u.createElement(te.Consumer,null,function(m){var p=m.activeTabId;return u.createElement(i,M({},f,{className:l(p)}))})}I.propTypes=Ye;var Ke=["size","color"];function Xe(e){var t=e.size,a=t===void 0?24:t,r=e.color,n=r===void 0?"currentColor":r,i=de(e,Ke);return u.createElement("svg",he({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-login",width:a,height:a,viewBox:"0 0 24 24",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},i),u.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),u.createElement("path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),u.createElement("path",{d:"M20 12h-13l3 -3m0 6l-3 -3"}))}const Ze=()=>D("tokens",{errorMessage:"Failed to request token"}),et=()=>D("/api/resend-email-confirmation-email",{errorMessage:"Failed to resend email confirmation email"}),tt=()=>D("/api/login-with-email",{errorMessage:"Failed to login with email"}),vt=()=>{var W;const e=ye(),{state:t}=be(),a=ve(),[r,n]=b.useState(null),[i,f]=b.useState(!1),[l,m]=b.useState("password"),{control:p,handleSubmit:h,formState:{errors:g},clearErrors:j}=we({defaultValues:{email:""},mode:"onChange"}),[d,B]=b.useState({grantType:"password",refreshToken:"",username:"",password:""}),oe=P(Ze()),ae=P(et(),{onSuccess:()=>{H.success("Confirmation email has been resent.")},onError:s=>{n(J(s))}}),ie=P(tt(),{onSuccess:()=>{H.success("Please check your email for a login link.")},onError:s=>{n(J(s))}}),se="Discover VintageAndPreOwned.com: Revolutionizing vintage fashion resale with AI-powered listings. Browse unique pre-loved items or list your own on our exclusive marketplace and popular platforms like eBay and Etsy. Join our sustainable fashion movement!",ce=s=>{e.onAuthenticated(s);const y=(t==null?void 0:t.redir)||"/";a(y)},le=async s=>{s.preventDefault(),f(!0);try{const y=await oe.mutateAsync(d);ce(y)}catch(y){n(y)}finally{f(!1)}},ue=s=>{n(null),j(),ie.mutate(s)},q=s=>{l!==s&&(m(s),n(null),j())},fe=async()=>{f(!0);try{const s={handleOrEmail:d.username};await ae.mutateAsync(s)}catch(s){n(s)}finally{f(!1)}},me=(((W=r==null?void 0:r.data)==null?void 0:W.error)??"")==="unconfirmed_email";return o.jsxs(ge,{className:"my-5",children:[o.jsxs(xe,{children:[o.jsx("title",{children:"Vintage and Pre-Owned - Login"}),o.jsx("meta",{property:"og:title",content:"Vintage and Pre-Owned - Login"}),o.jsx("meta",{property:"og:description",content:se}),o.jsx("meta",{property:"og:url",content:window.location.href}),o.jsx("meta",{property:"og:type",content:"website"})]}),o.jsxs(U,{className:"justify-content-center",children:[o.jsxs(x,{xs:12,md:8,lg:6,children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("img",{src:"/images/logo.png",style:{width:"150px"},alt:"Vintage & Pre-Owned Logo"}),o.jsx("h2",{className:"mt-2",children:"Welcome Back!"}),o.jsx("p",{className:"text-muted",children:"Log in to continue to VintageAndPreOwned.com"})]}),o.jsx(_e,{children:o.jsxs(Pe,{children:[o.jsxs(je,{tabs:!0,className:"justify-content-center mb-4",children:[o.jsx(z,{children:o.jsx(K,{className:v({active:l==="password"}),onClick:()=>q("password"),children:"Password Login"})}),o.jsx(z,{children:o.jsx(K,{className:v({active:l==="email"}),onClick:()=>q("email"),children:"Email Login"})})]}),o.jsxs(Je,{activeTab:l,children:[o.jsx(I,{tabId:"password",children:o.jsxs(G,{onSubmit:le,children:[o.jsxs(E,{children:[o.jsx(N,{for:"username",children:"Username or Email"}),o.jsx(k,{type:"text",id:"username",placeholder:"Enter your username or email",value:d.username,onChange:s=>B({...d,username:s.target.value})})]}),o.jsxs(E,{children:[o.jsx(N,{for:"password",children:"Password"}),o.jsx(k,{type:"password",id:"password",placeholder:"Enter your password",value:d.password,onChange:s=>B({...d,password:s.target.value})})]}),o.jsx(Q,{error:r}),me&&o.jsxs(Ee,{color:"warning",children:[o.jsx("p",{className:"mb-2",children:"Your email address is not confirmed. Please confirm your email to proceed."}),o.jsx(_,{color:"warning",onClick:fe,disabled:i,children:"Resend Confirmation Email"})]}),o.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[o.jsx(V,{to:"/forgot-password",className:"text-muted",children:"Forgot password?"}),o.jsxs(_,{color:"primary",type:"submit",disabled:i,children:[o.jsx(Xe,{size:16,className:"me-2"}),"Log In"]})]})]})}),o.jsx(I,{tabId:"email",children:o.jsxs(G,{onSubmit:h(ue),children:[o.jsxs(E,{children:[o.jsx(N,{for:"email",children:"Email"}),o.jsx(Oe,{control:p,name:"email",rules:{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email address"}},render:({field:s})=>o.jsx(k,{type:"email",id:"email",placeholder:"Enter your email",...s})}),o.jsx(ke,{error:g.email,fieldDisplayName:"Email"})]}),o.jsx(Q,{error:r}),o.jsx("div",{className:"text-end",children:o.jsx(_,{color:"primary",type:"submit",disabled:i,children:"Send Login Link"})})]})})]}),o.jsxs("div",{className:"text-center mt-4",children:[o.jsx("p",{className:"text-muted",children:"Or log in with"}),o.jsx(Ne,{registration:!1})]})]})}),o.jsx("div",{className:"text-center mt-4",children:o.jsxs("p",{className:"text-muted",children:["Don't have an account?"," ",o.jsx(V,{to:"/register",children:"Create one now"})]})})]}),o.jsxs(x,{xs:12,md:8,lg:6,className:"mt-5",children:[o.jsx("h4",{className:"text-center",children:"Why Join VintageAndPreOwned.com?"}),o.jsxs(U,{className:"mt-4",children:[o.jsxs(x,{md:6,children:[o.jsx("h5",{children:"For Buyers"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Browse unique vintage items from multiple sellers"}),o.jsx("li",{children:"Save your favorite searches for quick access"}),o.jsx("li",{children:"Enjoy a curated shopping experience"})]})]}),o.jsxs(x,{md:6,children:[o.jsx("h5",{children:"For Sellers"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Easy and intuitive listing creation"}),o.jsx("li",{children:"Reach a targeted audience of vintage enthusiasts"}),o.jsx("li",{children:"Access sales and inventory reporting tools"})]})]})]})]})]})]})};export{vt as default};
