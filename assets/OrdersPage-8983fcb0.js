import{r as n,p as v,j as r,S as R,B as j}from"./index-29ebecb4.js";import{R as A,C as c}from"./Col-7106f25e.js";import{T as E}from"./Table-2fae8ad2.js";import{F as G}from"./Form-feffa48a.js";import{F as d,L as l}from"./Label-25c4d9a0.js";import{A as L}from"./Alert-53afee14.js";import{u as $,C as p}from"./index.esm-28c77aa9.js";import{u as I}from"./useGetOrders-cb4ce7d0.js";import{E as T}from"./ErrorDisplay-926af4d8.js";import{G as u}from"./GenericInput-69b8ebf0.js";import{O as f}from"./types-9dadba29.js";import{C as B}from"./Currency-9311fda6.js";import{g as z,P as Q}from"./Pagination-f8b1ecd4.js";import"./toQuery-95abe6fa.js";import"./Input-092d3532.js";import"./currency-symbol-map-2c95d993.js";import"./strings-0c217f2f.js";import"./ButtonGroup-cb6cbaf6.js";import"./CardBody-f79b7743.js";const or=({handle:t,storeInfo:g})=>{const[m,a]=n.useState(1),[o,S]=n.useState(z()),[P,b]=n.useState({status:"",search:""}),y=e=>{a(1),S(e)},{control:h,handleSubmit:O}=$(),F=I({...P,handle:t,page:m,perPage:o}),{data:s,error:x,isLoading:N,refetch:C}=v(["orders",t,m,o],()=>F(),{keepPreviousData:!0,enabled:!!t}),D=async e=>{b(e),a(1),await C()};return N?r.jsx(R,{}):x?r.jsx(T,{error:x}):r.jsxs("div",{children:[r.jsxs("h2",{children:["Orders for ",g.name]}),r.jsx(G,{onSubmit:O(D),className:"mb-4",children:r.jsxs(A,{form:!0,children:[r.jsx(c,{md:4,children:r.jsxs(d,{children:[r.jsx(l,{for:"status",children:"Order Status"}),r.jsx(p,{name:"status",control:h,render:({field:e})=>r.jsxs(u,{field:e,type:"select",id:"status",children:[r.jsx("option",{value:"",children:"All"}),Object.entries(f).filter(([i])=>isNaN(Number(i))).map(([i,w])=>r.jsx("option",{value:w,children:i},i))]})})]})}),r.jsx(c,{md:6,children:r.jsxs(d,{children:[r.jsx(l,{for:"search",children:"Search"}),r.jsx(p,{name:"search",control:h,render:({field:e})=>r.jsx(u,{field:e,type:"text",id:"search",placeholder:"Search by order ID, customer name, or email"})})]})}),r.jsx(c,{md:2,children:r.jsxs(d,{children:[r.jsx(l,{children:"Â "}),r.jsx(j,{type:"submit",color:"primary",className:"w-100",children:"Filter"})]})})]})}),s&&s.items.length>0?r.jsxs(r.Fragment,{children:[r.jsxs(E,{responsive:!0,striped:!0,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order ID"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:s.items.map(e=>r.jsxs("tr",{children:[r.jsx("td",{children:e.id}),r.jsx("td",{children:`${e.firstName} ${e.lastName}`}),r.jsx("td",{children:new Date(e.createdOnUtc).toLocaleDateString()}),r.jsx("td",{children:f[e.orderStatus]}),r.jsx("td",{children:r.jsx(B,{currency:e.currency,val:e.total})}),r.jsx("td",{children:r.jsx(j,{color:"info",size:"sm",href:`/store-admin/${t}/orders/${e.id}`,children:"View"})})]},e.id))})]}),s&&r.jsx(Q,{pagedResult:s,onPageSelected:a,perPage:o,onPerPageSelected:y})]}):r.jsx(L,{color:"info",children:"No orders found."})]})};export{or as default};
