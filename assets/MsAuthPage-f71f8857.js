import{r as a,j as t}from"./index-29ebecb4.js";import{E as m}from"./ErrorDisplay-926af4d8.js";import{S as f}from"./Spinner-99079439.js";import{L as d}from"./types-9dadba29.js";import{u as h}from"./useSocialAuthLogin-942c6414.js";import{u as E}from"./useMutation-742de80f.js";import"./Alert-53afee14.js";const v=()=>{const[s,i]=a.useState(null),e=h(),{mutate:n,isLoading:c}=E(e,{onSuccess:r=>{if(r.authError&&r.authError.error!=="invalid_grant"){i(r.authError);return}window.opener.onSocialAuthLogin(r),window.close()},onError:r=>{i(r)}}),o=window.location.hash;return a.useEffect(()=>{if(o.indexOf("#")!==-1){const u=o.substr(1).split("&")[0].split("=")[1],p={provider:d.Microsoft,token:u};n(p)}},[o,n]),t.jsxs("div",{className:"container",children:[c&&!s&&t.jsx(f,{}),t.jsx(m,{error:s})]})};export{v as default};
